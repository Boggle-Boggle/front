name: 'Chromatic Deployment'

on:
  push:
    branches:
      - dev
    paths:
      - 'src/stories/**'
      - '.storybook/**'      
      - 'package.json' 
      - 'pnpm-lock.yaml'    

jobs:
  chromatic:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
        with:
          fetch-depth: 0

      - name: Enable pnpm
        run: corepack enable && corepack prepare pnpm@8.15.4 --activate

      - name: Install dependencies
        run: pnpm install

      - uses: chromaui/action@latest
        with:
          projectToken: ${{ secrets.CHROMATIC_PROJECT_TOKEN }}
          token: ${{ secrets.GITHUB_TOKEN }}

  message:
    runs-on: ubuntu-latest
    steps:
      - uses: tsickert/discord-webhook@v5.3.0
        with:
          webhook-url: ${{ secrets.DISCORD_WEBHOOK }}
          content: "ğŸš¨ğŸš¨ğŸš¨ğŸš¨ğŸš¨ğŸš¨ì• ì• ì• ì• ì• ì•µâ€¼ï¸â€¼ï¸â€¼ï¸â€¼ï¸â€¼ï¸â€¼ï¸ğŸš¨ğŸš¨ğŸš¨ğŸš¨ğŸš¨ğŸš¨ğŸ“¢ğŸ“¢ğŸ“¢ğŸ“¢ğŸ“¢ğŸ“¢ğŸ“¢ê¸´ê¸‰ìƒí™©â€¼ï¸â€¼ï¸â€¼ï¸ê¸´ê¸‰ìƒí™©â€¼ï¸â€¼ï¸â€¼ï¸â€¼ï¸â€¼ï¸ğŸ“¢ğŸ“¢ğŸ“¢ğŸ“¢ğŸ“¢ğŸ“¢ğŸ“¢ğŸ”ŠğŸ”ŠğŸ”ŠğŸ”ŠğŸ”ŠğŸ”ŠìŠ¤í† ë¦¬ë¶Â ì—…ë°ì´íŠ¸ ë°œìƒâ€¼ï¸â€¼ï¸â€¼ï¸ğŸ”ŠğŸ”ŠğŸ”ŠğŸ”ŠğŸ”ŠğŸ”ŠğŸ”ŠğŸ”ŠğŸ”ŠğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ì´ë©€ì ¼ì”¨â€¼ï¸â€¼ï¸â€¼ï¸ì´ë©€ì ¼ì”¨â€¼ï¸â€¼ï¸ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ›ğŸ›ğŸ›ğŸ›ğŸ›ğŸ›ğŸ›ëª¨ë‘ì£¼ëª©í•´ì£¼ì„¸ìš”ë•¡ë•¡ë•¡ë•¡ë•¡ğŸ›ğŸ›ğŸ›ğŸ›ğŸ›ğŸ¤ğŸ¤ğŸ¤ğŸ¤ì•„ì•„-ë§ˆì´í¬í…ŒìŠ¤íŠ¸-!ë§ˆì´í¬í…ŒìŠ¤íŠ¸-!ğŸ¤ğŸ¤ğŸ¤ğŸ¤ğŸ™ğŸ™ğŸ™ğŸ™ğŸ™ë§ˆì´í¬í…ŒìŠ¤íŠ¸â€” ë“¤ë¦°ë‹¤ë©´ ì‘ë‹µí•˜ë¼â€”-ğŸ™ğŸ™ğŸ™ğŸ™ğŸ™ğŸ“£ğŸ“£ğŸ“£ğŸ“£ğŸ“£ğŸ“£ â€¼ï¸â€¼ï¸â€¼ï¸â€¼ï¸â€¼ï¸â€¼ï¸ğŸš¨ğŸš¨ğŸš¨ğŸš¨ğŸš¨ğŸš¨ğŸ“¢ğŸ“¢ğŸ“¢ğŸ“¢ğŸ“¢ğŸ“¢ğŸ“¢ê¸´ê¸‰ìƒí™©â€¼ï¸â€¼ï¸â€¼ï¸ê¸´ê¸‰ìƒí™©â€¼ï¸â€¼ï¸â€¼ï¸â€¼ï¸â€¼ï¸ğŸ“¢ğŸ“¢ğŸ“¢ğŸ“¢ğŸ“¢ğŸ“¢ğŸ“¢ğŸ”ŠğŸ”ŠğŸ”ŠğŸ”ŠğŸ”ŠğŸ”ŠìŠ¤í† ë¦¬ë¶Â ì—…ë°ì´íŠ¸ ë°œìƒâ€¼ï¸â€¼ï¸â€¼ï¸ğŸ”ŠğŸ”ŠğŸ”ŠğŸ”ŠğŸ”ŠğŸ”ŠğŸ”ŠğŸ”ŠğŸ”ŠğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ì´ë©€ì ¼ì”¨â€¼ï¸â€¼ï¸â€¼ï¸ì´ë©€ì ¼ì”¨â€¼ï¸â€¼ï¸ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ›ğŸ›ğŸ›ğŸ›ğŸ›ğŸ›ğŸ›ëª¨ë‘ì£¼ëª©í•´ì£¼ì„¸ìš”ë•¡ë•¡ë•¡ë•¡ë•¡ğŸ›ğŸ›ğŸ›ğŸ›ğŸ›ğŸ¤ğŸ¤ğŸ¤ğŸ¤ì•„ì•„-ë§ˆì´í¬í…ŒìŠ¤íŠ¸-!ë§ˆì´í¬í…ŒìŠ¤íŠ¸-!ğŸ¤ğŸ¤ğŸ¤ğŸ¤ğŸ™ğŸ™ğŸ™ğŸ™ğŸ™ë§ˆì´í¬í…ŒìŠ¤íŠ¸â€” ë“¤ë¦°ë‹¤ë©´ ì‘ë‹µí•˜ë¼â€”-ğŸ™ğŸ™ğŸ™ğŸ™ğŸ™ğŸ“£ğŸ“£ğŸ“£ğŸ“£ğŸ“£ğŸ“£"
